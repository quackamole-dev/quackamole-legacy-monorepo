{"version":3,"sources":["store/reducers/room.reducer.js","store/actionTypes.js","utils.js","store/reducers/localUser.reducer.js","store/reducers/peers.reducer.js","store/reducers/connections.reducer.js","store/reducers/streams.reducer.js","store/reducers/plugin.reducer.js","store/reducers/chat.reducer.js","store/reducers/index.js","store/index.js","style/theme/MainTheme.jsx","store/actions/streams.actions.js","store/actions/room.actions.js","store/actions/connections.actions.js","store/actions/localUser.actions.js","constants.js","components/RoomLobby/RoomLobby.jsx","store/actions/plugin.actions.js","components/Room/RoomPluginContent/RoomPluginContent.jsx","components/Room/GenericMediaCard/GenericMediaCard.jsx","components/Room/RoomMediaManager/RemoteMediaCard/RemoteMediaCard.jsx","components/Room/RoomMediaManager/RemoteMediaManager/RemoteMediaManager.jsx","components/Room/RoomMediaManager/RoomMediaManager.jsx","components/Room/RoomSidebarMenu/RoomSidebarMenu.jsx","components/Room/RoomSidebarChat/Chat/ChatMsg.jsx","components/Room/RoomSidebarChat/Chat/ChatStyle.jsx","components/Room/RoomSidebarChat/Chat/Chat.jsx","store/actions/chat.actions.js","components/Room/RoomSidebarChat/RoomSidebarChat.jsx","components/Room/RoomActionbar/RoomActionbar.jsx","components/Room/Room.jsx","components/Home/BulletPoint/BulletPoint.jsx","components/Home/Home.jsx","components/RoomCreateForm/RoomCreateForm.jsx","components/App/App.jsx","index.jsx"],"names":["roomReducer","produce","roomDraft","action","type","data","payload","room","error","clearStreamTracks","stream","getTracks","forEach","track","stop","getPersistedData","key","dataJson","localStorage","getItem","JSON","parse","initialState","socket","metadata","loading","localUserReducer","localPeerDraft","peersReducer","peersDraft","socketId","peer","id","connectionsReducer","connectionsDraft","connection","remoteSocketId","streamsReducer","streamsDraft","Object","values","pluginReducer","pluginDraft","plugin","url","name","iframe","chatReducer","messagesDraft","push","reducer","combineReducers","localUser","peers","connections","streams","chat","store","createStore","composeWithDevTools","applyMiddleware","thunk","theme","createMuiTheme","palette","primary","main","secondary","addStream","dispatch","getState","removeStream","startLocalStream","constraintsOverride","a","localSocket","constraints","audio","video","frameRate","ideal","max","width","height","navigator","mediaDevices","getUserMedia","mediaStream","console","log","setCurrentRoomError","addConnection","initConnectionListeners","removeConnection","initDataChannelListeners","dataChannel","onmessage","evt","textMessage","nickname","authorSocketId","text","window","postMessage","contentWindow","senderSocketId","onopen","onclose","currentIteration","iceCandidates","timer","length","emit","receiverSocketId","rawDelay","Math","pow","roundedDelay","round","setTimeout","onicecandidate","iceCandidate","candidate","maxIterations","onaddstream","onsignalingstatechange","signalingState","localDescription","remoteDescription","ondatachannel","defaultDataChannel","channel","introduceYourself","connectWithPeer","RTCPeerConnection","iceServers","urls","iceCandidatePoolSize","createDataChannel","localStream","createOffer","offer","setLocalDescription","sendDataToConnection","serializedData","stringify","send","resetLocalUser","initLocalUserSocket","io","process","secure","query","object","entries","map","value","join","initLocalUserSocketListeners","on","setRemoteDescription","RTCSessionDescription","createAnswer","answer","addIceCandidate","RTCIceCandidate","useStyles","makeStyles","containerStyle","display","justifyContent","paddingTop","titleStyle","padding","color","fontWeight","backgroundColor","nicknameStyle","margin","textfieldLink","marginRight","marginLeft","nextButton","boxShadow","alignbutton","marginTop","marginBottom","connect","state","roomError","setMetadata","dataStringified","setItem","persistData","history","match","useState","newNickname","setNewNickname","params","roomId","link","setLink","classes","handleJoin","e","ThemeProvider","Box","bgcolor","alignItems","paddingLeft","to","style","textDecoration","Grid","container","className","item","xs","md","lg","flexDirection","borderRadius","Typography","variant","TextField","required","label","onChange","target","onKeyPress","autoFocus","Button","onClick","size","textAlign","message","setPlugin","pluginMessageActions","peerId","handlePluginMessage","startsWith","iframeRef","useRef","useEffect","handleMessage","addEventListener","removeEventListener","current","flexGrow","src","border","ref","title","root","cardWrapper","position","flexFlow","media","objectFit","displayName","opacity","bottom","left","fontSize","userSelect","GenericMediaCard","muted","user","videoRef","srcObject","oncanplay","play","setVideoSrc","Card","CircularProgress","ownProps","remoteStream","remoteNickname","roomMediaManager","borderLeft","localPeerMetadata","minWidth","list","menuIcon","plugins","open","setOpen","toggleDrawer","event","handleSelectPlugin","index","currentTarget","dataset","Drawer","onClose","anchor","role","List","i","ListItem","button","data-index","ListItemIcon","ListItemText","Divider","ChatMsg","withStyles","spacing","radius","rightBgColor","wrapper","avatar","leftRow","rightRow","msg","wordBreak","fontFamily","borderTopRightRadius","borderBottomRightRadius","grey","right","borderTopLeftRadius","borderBottomLeftRadius","common","white","leftFirst","leftLast","rightFirst","rightLast","props","messages","side","GridContainerProps","GridItemProps","AvatarProps","getTypographyProps","justify","Avatar","cx","TypographyProps","align","defaultProps","chatFeed","maxHeight","overflow","chatInput","chatInputTextfield","zIndex","chatInputSendBtn","cursor","transition","chatData","sendMessage","newMessage","setNewMessage","feedRef","scrollTop","scrollHeight","preventDefault","replace","parseEmojis","toArray","reduce","previous","children","chatMessages","multiline","rowsMax","shiftKey","concat","RoomSidebarChat","_","RoomActionbar","borderTop","localPeerLoading","currentRoom","initLocalUser","joinRoom","password","err","joinedUsers","roomExitCleanup","localSocketId","disconnect","conn","close","smallScreenContainer","alignTitle","customizeTitle","customizeIcon","customizeText","paddingRight","BulletPoint","icon","smallScreen","useMediaQuery","content","image","alt","header","textTransform","box","smallScreenBox","titleContainer","buttonStyle","outline","mainImg","smallScreenMainImg","bulletPoints","smallScreenBulletPoints","Home","aria-label","gutterBottom","formControl","select","borderColor","textfield","alignButton","myButton","paper","copyLink","subtitle","RoomCreateForm","React","setName","setRoomId","active","setActive","useHistory","handleChangeTexfield","handleKeyPress","createRoom","maxUsers","fetch","method","body","headers","then","response","json","testedString","port","ipRegex","test","createRoomComponent","shareRoomComponent","clipboard","writeText","App","CssBaseline","exact","path","component","RoomLobby","Room","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.30c4ca7d.chunk.js","sourcesContent":["import {SET_CURRENT_ROOM, SET_CURRENT_ROOM_ERROR} from '../actionTypes';\r\nimport produce from 'immer'\r\n\r\nconst initialState = {\r\n    data: {\r\n        // id: 'dummy-room-id',\r\n        // name: 'Dummy Room',\r\n    },\r\n    error: null\r\n};\r\n\r\nconst roomReducer = produce((roomDraft, action) => {\r\n    switch (action.type) {\r\n        case SET_CURRENT_ROOM: {\r\n            roomDraft.data = action.payload.room;\r\n            roomDraft.error = null;\r\n            return;\r\n        }\r\n        case SET_CURRENT_ROOM_ERROR: {\r\n            roomDraft.error = action.payload.error;\r\n            return;\r\n        }\r\n        default: {}\r\n    }\r\n}, initialState);\r\n\r\nexport default roomReducer;\r\n","export const ADD_PEER = 'ADD_PEER';\r\nexport const REMOVE_PEER = 'REMOVE_PEER';\r\nexport const SET_PEERS_ERROR = 'SET_PEERS_ERROR';\r\n\r\nexport const ADD_CONNECTION = 'ADD_CONNECTION';\r\nexport const REMOVE_CONNECTION = 'REMOVE_CONNECTION';\r\nexport const SET_CONNECTIONS_ERROR = 'SET_CONNECTIONS_ERROR';\r\n\r\nexport const ADD_CALL = 'ADD_CALL';\r\nexport const REMOVE_CALL = 'REMOVE_CALL';\r\nexport const SET_CALLS_ERROR = 'SET_CALLS_ERROR';\r\n\r\nexport const ADD_STREAM = 'ADD_STREAM';\r\nexport const REMOVE_STREAM = 'REMOVE_STREAM';\r\nexport const SET_STREAMS_ERROR = 'SET_STREAM_ERROR';\r\nexport const CLEAR_ALL_STREAMS = 'CLEAR_ALL_STREAMS';\r\n\r\nexport const SET_CURRENT_ROOM = 'SET_CURRENT_ROOM';\r\nexport const SET_CURRENT_ROOM_ERROR = 'SET_CURRENT_ROOM_ERROR';\r\n\r\nexport const SET_LOCAL_USER_LOADING = 'SET_LOCAL_USER_LOADING';\r\nexport const INIT_LOCAL_USER_SOCKET = 'INIT_LOCAL_USER_SOCKET';\r\nexport const INIT_LOCAL_USER_PEER = 'INIT_LOCAL_USER_PEER';\r\nexport const SET_LOCAL_USER_METADATA = 'SET_LOCAL_USER_METADATA';\r\nexport const SET_LOCAL_USER_ERROR = 'SET_LOCAL_USER_ERROR';\r\nexport const RESET_LOCAL_USER = 'RESET_LOCAL_USER';\r\n\r\nexport const SET_PLUGIN = 'SET_PLUGIN';\r\nexport const SET_PLUGIN_ERROR = 'SET_PLUGIN_ERROR';\r\n\r\nexport const ADD_NEW_MESSAGE = 'ADD_NEW_MESSAGE';\r\n","// The place to put all helper methods that do not necessarily belong to a specific component\r\n// Once this file gets too crowded, create an utils folder and start seperating the exported helper methods\r\n\r\n// import {useEffect, useRef, useState} from \"react\";\r\nimport ipRegex from \"ip-regex\";\r\n\r\n/**\r\n * Transforms a javascript object into a query string.\r\n * @param object The source object. Example: {a: 5, b: 10}\r\n * @returns {string} The resulting query string. Example 'a=5&b=10'\r\n */\r\nexport const serializeQueryString = object => {\r\n    return Object.entries(object).map(([key, value]) => `${key}=${value}`).join('&');\r\n};\r\n\r\n/**\r\n * Set the src of a html5 <video> element and start playing\r\n * @param videoRef The reference to the video element\r\n * @param stream The stream that should be played by the referenced video element\r\n * @param muted Whether or not the audio of the stream should be muted\r\n */\r\nexport const setVideoSrc = (videoRef, stream, muted= true) => {\r\n    if (videoRef.current && stream) {\r\n        videoRef.current.srcObject = stream;\r\n        videoRef.current.oncanplay = () => {\r\n            videoRef.current.play();\r\n            videoRef.current.muted = muted;\r\n        };\r\n    }\r\n};\r\n\r\n// untested prototype for a hook that might replace setVideoSrc(). Right now there is no benefit of using it. Rethink design\r\n// export const useStream = (muted = false) => {\r\n//     const videoRef = useRef(null);\r\n//     const [stream, setStream] = useState(null);\r\n//\r\n//     useEffect(() => {\r\n//         if (videoRef.current && stream) {\r\n//             videoRef.current.srcObject = stream;\r\n//             videoRef.current.oncanplay = () => {\r\n//                 videoRef.current.play();\r\n//                 videoRef.current.muted = muted;\r\n//             };\r\n//         }\r\n//     }, [stream, videoRef, muted]);\r\n//\r\n//     return [videoRef, setStream];\r\n// };\r\n\r\nexport const clearStreamTracks = stream => {\r\n    if (stream) {\r\n        stream.getTracks().forEach(track => track.stop());\r\n    }\r\n};\r\n\r\nexport const getPersistedData = (key) => {\r\n    const dataJson = localStorage.getItem(key);\r\n    return dataJson ? JSON.parse(dataJson) : {};\r\n};\r\n\r\nexport const persistData = (key, data) => {\r\n    const dataStringified = JSON.stringify(data);\r\n    localStorage.setItem(key, dataStringified);\r\n};\r\n\r\nexport const isIpAddress = (testedString) => {\r\n    return ipRegex().test(testedString);\r\n}\r\n","import {INIT_LOCAL_USER_SOCKET, SET_LOCAL_USER_METADATA, SET_LOCAL_USER_ERROR, RESET_LOCAL_USER, SET_LOCAL_USER_LOADING} from '../actionTypes';\r\nimport {getPersistedData} from \"../../utils\";\r\nimport produce from 'immer'\r\n\r\nconst initialState = {\r\n    socket: null,\r\n    metadata: getPersistedData('metadata'),\r\n    loading: false,\r\n    error: null\r\n};\r\n\r\nconst localUserReducer = produce((localPeerDraft, action) => {\r\n    switch (action.type) {\r\n        case SET_LOCAL_USER_LOADING: {\r\n            localPeerDraft.loading = action.payload.loading;\r\n            return;\r\n        }\r\n        case INIT_LOCAL_USER_SOCKET: {\r\n            localPeerDraft.socket = action.payload.socket;\r\n            localPeerDraft.error = null;\r\n            return;\r\n        }\r\n        case SET_LOCAL_USER_METADATA: {\r\n            localPeerDraft.metadata = action.payload.metadata;\r\n            localPeerDraft.error = null;\r\n            return;\r\n        }\r\n        case SET_LOCAL_USER_ERROR: {\r\n            localPeerDraft.error = action.payload.error;\r\n            return;\r\n        }\r\n        case RESET_LOCAL_USER: {\r\n            localPeerDraft.socket = null;\r\n            localPeerDraft.loading = false;\r\n            localPeerDraft.metadata = getPersistedData('metadata');\r\n            localPeerDraft.error = null;\r\n            return;\r\n        }\r\n        default: {}\r\n    }\r\n}, initialState);\r\n\r\nexport default localUserReducer;\r\n","import {ADD_PEER, REMOVE_PEER, SET_PEERS_ERROR} from '../actionTypes';\r\nimport produce from 'immer';\r\n\r\nconst initialState = {\r\n    data: {\r\n        // 'd7f7saim3': {nickname: 'Andi'},\r\n        // '32mfdnmio': {nickname: 'Jimmy'}\r\n    },\r\n    error: null\r\n};\r\n\r\nconst peersReducer = produce((peersDraft, action) => {\r\n    switch (action.type) {\r\n        case ADD_PEER: {\r\n            const {socketId, metadata} = action.payload;\r\n            peersDraft.data[socketId] = {metadata};\r\n            peersDraft.error = null;\r\n            return;\r\n        }\r\n        case REMOVE_PEER: {\r\n            const peer = action.payload.peer;\r\n            delete peersDraft.data[peer.id];\r\n            peersDraft.error = null;\r\n            return;\r\n        }\r\n        case SET_PEERS_ERROR: {\r\n            peersDraft.error = action.payload.error;\r\n            return;\r\n\r\n        }\r\n        default: {\r\n        }\r\n    }\r\n}, initialState);\r\n\r\nexport default peersReducer;\r\n","import {ADD_CONNECTION, REMOVE_CONNECTION, SET_CONNECTIONS_ERROR} from '../actionTypes';\r\nimport produce from 'immer';\r\n\r\nconst initialState = {\r\n    data: {},\r\n    error: null\r\n};\r\n\r\nconst connectionsReducer = produce((connectionsDraft, action) => {\r\n    switch (action.type) {\r\n        case ADD_CONNECTION: {\r\n            const connection = action.payload.connection;\r\n            connectionsDraft.data[connection.remoteSocketId] =  connection;\r\n            connectionsDraft.error = null;\r\n            return;\r\n        }\r\n        case REMOVE_CONNECTION: {\r\n            const connection = action.payload.connection;\r\n            delete connectionsDraft.data[connection.remoteSocketId];\r\n            connectionsDraft.error = null;\r\n            return;\r\n        }\r\n        case SET_CONNECTIONS_ERROR: {\r\n            connectionsDraft.error = action.payload.error;\r\n            return;\r\n        }\r\n        default: {}\r\n    }\r\n}, initialState);\r\n\r\nexport default connectionsReducer;\r\n","import {ADD_STREAM, REMOVE_STREAM, SET_STREAMS_ERROR, CLEAR_ALL_STREAMS} from '../actionTypes';\r\nimport {clearStreamTracks} from \"../../utils\";\r\nimport produce from 'immer'\r\n\r\nconst initialState = {\r\n    data: {},\r\n    error: null\r\n};\r\n\r\nconst streamsReducer = produce((streamsDraft, action) => {\r\n    switch (action.type) {\r\n        case ADD_STREAM: {\r\n            const {socketId, stream} = action.payload;\r\n            streamsDraft.data[socketId] = stream;\r\n            streamsDraft.error = null;\r\n            return;\r\n        }\r\n        case REMOVE_STREAM: {\r\n            const {socketId} = action.payload;\r\n            const stream = streamsDraft.data[socketId];\r\n            clearStreamTracks(stream);\r\n            delete streamsDraft.data[socketId];\r\n            return;\r\n        }\r\n        case SET_STREAMS_ERROR: {\r\n            streamsDraft.error = action.payload.error;\r\n            return;\r\n        }\r\n        case CLEAR_ALL_STREAMS: {\r\n            Object.values(streamsDraft.data).forEach(clearStreamTracks);\r\n            streamsDraft.data = {};\r\n            streamsDraft.error = null;\r\n            return;\r\n        }\r\n        default: {}\r\n    }\r\n}, initialState);\r\n\r\nexport default streamsReducer;\r\n","import {SET_PLUGIN, SET_PLUGIN_ERROR} from '../actionTypes';\r\nimport produce from 'immer'\r\n\r\n// TODO there should be a plugins.reducer storing the plugin data of already fetched plugins (once they come from the backend)\r\n//  activePluginId should be stored in the room.reducer, as well as pluginIds that are shown in the room sidebar.\r\n//  plugin data can be fetched from the backend (or could already be included when fetching the room)\r\nconst initialState = {\r\n    // origin: 'null',\r\n    iframe: null,\r\n    url: '',\r\n    name: 'p2p-test-plugin',\r\n    error: null\r\n};\r\n\r\nconst pluginReducer = produce((pluginDraft, action) => {\r\n    switch (action.type) {\r\n        case SET_PLUGIN: {\r\n            const {url, name, iframe} = action.payload.plugin;\r\n            pluginDraft.iframe = iframe;\r\n            pluginDraft.url = url;\r\n            pluginDraft.name = name;\r\n            pluginDraft.error = null;\r\n            return;\r\n        }\r\n        case SET_PLUGIN_ERROR: {\r\n            pluginDraft.error = action.payload.error;\r\n            return;\r\n        }\r\n        default: {}\r\n    }\r\n}, initialState);\r\n\r\nexport default pluginReducer;\r\n","import {ADD_NEW_MESSAGE} from '../actionTypes';\r\nimport produce from 'immer';\r\n\r\nconst initialState = [];\r\n\r\nconst chatReducer = produce((messagesDraft, action) => {\r\n    switch(action.type) {\r\n        case ADD_NEW_MESSAGE: {\r\n            messagesDraft.push(action.payload);  // FIXME should be action.payload.message\r\n            return;\r\n        }\r\n        default: {}\r\n    }\r\n}, initialState);\r\n\r\nexport default chatReducer\r\n","import { combineReducers } from 'redux';\r\nimport roomReducer from './room.reducer';\r\nimport localUserReducer from \"./localUser.reducer\";\r\nimport peersReducer from './peers.reducer';\r\nimport connectionsReducer from './connections.reducer';\r\nimport streamsReducer from \"./streams.reducer\";\r\nimport pluginReducer from \"./plugin.reducer\";\r\nimport chatReducer from \"./chat.reducer\";\r\n\r\nconst reducer = combineReducers({\r\n    room: roomReducer,\r\n    localUser: localUserReducer,\r\n    peers: peersReducer,\r\n    connections: connectionsReducer,\r\n    streams: streamsReducer,\r\n    plugin: pluginReducer,\r\n    chat: chatReducer\r\n});\r\n\r\nexport default reducer;\r\n","import { createStore, applyMiddleware } from 'redux';\r\nimport thunk from 'redux-thunk';\r\nimport { composeWithDevTools } from 'redux-devtools-extension';\r\nimport reducer from './reducers';\r\n\r\nconst store = createStore(reducer, composeWithDevTools(applyMiddleware(thunk)));\r\n\r\nexport default store;\r\n","import { createMuiTheme } from '@material-ui/core/styles';\r\n\r\nconst theme = createMuiTheme({\r\n    palette: {\r\n        primary: {\r\n            main: '#2E7D32'\r\n        },\r\n        secondary: {\r\n            main: '#FBC02D'\r\n        }\r\n    }\r\n})\r\n\r\nexport default theme\r\n","import {ADD_STREAM, CLEAR_ALL_STREAMS, REMOVE_STREAM} from \"../actionTypes\";\r\n\r\nexport const addStream = (socketId, stream) => (dispatch, getState) => {\r\n    if (stream) {\r\n        dispatch({type: ADD_STREAM, payload: {socketId, stream}});\r\n    }\r\n};\r\n\r\nexport const removeStream = (socketId) => (dispatch, getState) => {\r\n    if (socketId) {\r\n        dispatch({type: REMOVE_STREAM, payload: {socketId}});\r\n    }\r\n};\r\n\r\nexport const startLocalStream = (socket, constraintsOverride) => async (dispatch, getState) => {\r\n    const localSocket = socket || getState().localUser.socket;\r\n\r\n    if (!socket) { return; }\r\n    const socketId = socket.id;\r\n    const localSteam = getState().streams.data[socketId];\r\n    if (!localSteam) {\r\n\r\n        try {\r\n            const constraints = {\r\n                audio: true,\r\n                video: {\r\n                    frameRate: {ideal: 20, max: 25},\r\n                    width: {ideal: 128},\r\n                    height: {ideal: 72}\r\n                }\r\n            };\r\n\r\n            let mediaStream = await navigator.mediaDevices.getUserMedia(constraintsOverride || constraints);\r\n            dispatch(addStream(localSocket.id, mediaStream));\r\n            return mediaStream;\r\n        } catch (error) {\r\n            console.error('local stream couldnt be started', error);\r\n        }\r\n    } else {\r\n        console.log('local stream already active');\r\n    }\r\n};\r\nexport const clearAllStreams = () => async (dispatch, getState) => {\r\n        dispatch({type: CLEAR_ALL_STREAMS});\r\n};\r\n","import {SET_CURRENT_ROOM, SET_CURRENT_ROOM_ERROR} from \"../actionTypes\";\r\nimport {clearAllStreams} from './streams.actions';\r\nimport {resetLocalUser} from './localUser.actions';\r\n\r\nexport const setCurrentRoom = room => ({\r\n    type: SET_CURRENT_ROOM,\r\n    payload: {room}\r\n});\r\n\r\nexport const setCurrentRoomError = error => ({\r\n    type: SET_CURRENT_ROOM_ERROR,\r\n    payload: {error}\r\n});\r\n\r\nexport const joinRoom = (roomId, password, peerData) => (dispatch, getState) => {\r\n    //\r\n    // const room = null;\r\n    // dispatch(setCurrentRoom(room));\r\n};\r\n\r\nexport const roomExitCleanup = () => (dispatch, getState) => {\r\n    const state = getState();\r\n\r\n    const socket = state.localUser.socket;\r\n    const localSocketId = socket.id;\r\n    if (socket) {\r\n         const currentRoom = state.room.data;\r\n         if (currentRoom.id) {\r\n             socket.emit('leave', currentRoom.id);\r\n             dispatch(setCurrentRoom({}));\r\n         }\r\n        socket.disconnect();\r\n        dispatch(resetLocalUser());\r\n    }\r\n\r\n    const connections = state.connections.data;\r\n    if (connections) {\r\n        Object.values(connections).forEach(conn => conn.close());\r\n    }\r\n\r\n    const localStream = state.streams[localSocketId];\r\n    if (localStream) {\r\n        window.localStream.getTracks().forEach(track => track.stop());\r\n    }\r\n    dispatch(clearAllStreams());\r\n};\r\n","import {ADD_CONNECTION, REMOVE_CONNECTION, ADD_NEW_MESSAGE, SET_CURRENT_ROOM, ADD_PEER} from '../actionTypes';\r\nimport {addStream, removeStream, startLocalStream} from './streams.actions';\r\nimport {setCurrentRoomError} from './room.actions';\r\n\r\nexport const addConnection = (connection) => async (dispatch, getState) => {\r\n    if (connection && connection.socketId) {\r\n        console.log('addConnection', connection);\r\n        await dispatch({type: ADD_CONNECTION, payload: {connection}});\r\n        await dispatch(initConnectionListeners(connection));\r\n    }\r\n};\r\n\r\nexport const removeConnection = connection => async (dispatch, getState) => {\r\n    if (connection && connection.remoteSocketId && connection.socketId) {\r\n\r\n        const stream = getState().streams.data[connection.remoteSocketId];\r\n        if (stream) {\r\n            await dispatch(removeStream(connection.remoteSocketId));\r\n        }\r\n\r\n        await dispatch({type: REMOVE_CONNECTION, payload: {connection}});\r\n    }\r\n};\r\n\r\nexport const initDataChannelListeners = dataChannel => (dispatch, getState) => {\r\n    if (dataChannel) {\r\n        dataChannel.onmessage = evt => {\r\n            console.log('received message: ', evt);\r\n            const data = JSON.parse(evt.data);\r\n            const type = data.type;\r\n\r\n            if (data.textMessage) {\r\n                dispatch({type: ADD_NEW_MESSAGE, payload: data.textMessage});\r\n\r\n                const metadata = getState().localUser.metadata;\r\n                console.log(\r\n                    `%c MESSAGE - ${metadata.nickname || data.textMessage.authorSocketId}: \"${data.textMessage.text}\"`,\r\n                    'background: black; color: white; padding: 1rem; border: 1px solid white; border-radius: 5px;'\r\n                );\r\n            }\r\n\r\n            if (type === 'PLUGIN_DATA') {\r\n                window.postMessage(data.payload, '*');\r\n                const iframe = getState().plugin.iframe;\r\n                if (iframe) {\r\n                    iframe.contentWindow.postMessage(data, '*');\r\n                }\r\n            }\r\n\r\n            if (type === 'PEER_INTRODUCTION') {\r\n                console.log('Connected peer is introducing himself to you:', data.payload);\r\n                const {senderSocketId, metadata} = data.payload;\r\n                dispatch({type: ADD_PEER, payload: {metadata: metadata, socketId: senderSocketId}});\r\n            }\r\n        };\r\n\r\n        dataChannel.onopen = () => {\r\n            console.log('datachannel open', dataChannel);\r\n        };\r\n\r\n        dataChannel.onclose = () => {\r\n            console.log('datachannel close');\r\n        };\r\n    }\r\n};\r\n\r\nexport const initConnectionListeners = connection => (dispatch, getState) => {\r\n    if (connection && connection.socketId) {\r\n        const delayMultiplier = 1.5;\r\n        const baseDelay = 450;\r\n        const maxIterations = 9;\r\n        let currentIteration = 0;\r\n        let iceCandidates = [];\r\n\r\n        // emits ice-candidates with an increasing delay until the onicecandidate null event\r\n        // Most of the candidates trickle in within the first 0-2seconds but the null event can happen much later\r\n        // The goal is to send all ice-candidates to remotePeer but without clogging up the event loop too much\r\n        // High likelihood to be changed/simplified as time goes by...\r\n        const timer = () => {\r\n            if (iceCandidates.length) {\r\n                const {socket} = getState().localUser;\r\n                socket.emit('ice-candidates', {\r\n                    senderSocketId: socket.id,\r\n                    receiverSocketId: connection.remoteSocketId,\r\n                    iceCandidates: iceCandidates\r\n                });\r\n                iceCandidates = [];\r\n            }\r\n\r\n            if (currentIteration <= maxIterations) {\r\n                const rawDelay = baseDelay * Math.pow(delayMultiplier, currentIteration);\r\n                const roundedDelay = Math.round(rawDelay / 100 * 2) * 100 / 2;\r\n\r\n                console.log('TIMER DELAY', roundedDelay);\r\n                setTimeout(timer, Math.round(roundedDelay));\r\n                currentIteration++;\r\n            }\r\n        }\r\n        timer();\r\n\r\n        connection.onicecandidate = (evt) => {\r\n            const iceCandidate = evt.candidate;\r\n\r\n            if (iceCandidate) {\r\n                iceCandidates.push(iceCandidate);\r\n            } else {\r\n                console.log('no more ICE');\r\n                currentIteration = maxIterations + 1;\r\n                timer();\r\n            }\r\n        }\r\n\r\n        connection.onaddstream = evt => {\r\n            dispatch(addStream(connection.remoteSocketId, evt.stream));\r\n        };\r\n\r\n        connection.onsignalingstatechange = evt => {\r\n            if (connection.signalingState && connection.localDescription && connection.remoteDescription) {\r\n                console.log('CONNECTION ESTABLISHED!!');\r\n            }\r\n        };\r\n\r\n        connection.ondatachannel = async evt => {\r\n            console.log('ondatachannel', evt);\r\n            connection.defaultDataChannel = evt.channel; // FIXME temporary. create wrapper for RTCPeerConnection\r\n            await dispatch(initDataChannelListeners(connection.defaultDataChannel));\r\n            // setTimeout(() => dispatch(introduceYourself(connection.defaultDataChannel), 500)); // TODO temporary delay for experimentation\r\n            dispatch(introduceYourself(connection.defaultDataChannel)); // FIXME test whether it works without timeout now\r\n\r\n        }\r\n\r\n        connection.onmessage = evt => {\r\n            console.log('---------connection.onmessage', evt);\r\n            // Now handled by dataChannels without wrapper of peerjs\r\n        };\r\n    }\r\n};\r\n\r\nexport const connectWithPeer = remoteSocketId => async (dispatch, getState) => {\r\n    const {socket} = getState().localUser;\r\n\r\n    if (remoteSocketId !== socket.id) {\r\n\r\n        const configuration = {\r\n            iceServers: [{urls: 'stun:stun.l.google.com:19302'}],\r\n            iceCandidatePoolSize: 1\r\n        };\r\n\r\n        const connection = new RTCPeerConnection(configuration); // TODO check first if one already exists\r\n        connection.socketId = socket.id;\r\n        connection.remoteSocketId = remoteSocketId;\r\n\r\n        connection.defaultDataChannel = connection.createDataChannel('default'); // FIXME temporary. create wrapper for RTCPeerConnection\r\n        console.log('--defaultDataChannel created', connection.defaultDataChannel);\r\n        await dispatch(initDataChannelListeners(connection.defaultDataChannel));\r\n\r\n        const localStream = await getState().streams.data[socket.id] || dispatch(startLocalStream());\r\n        connection.addStream(localStream); // addStream needs to be called BEFORE attempting to create offer/answer\r\n        await dispatch(addConnection(connection));\r\n\r\n        const offer = await connection.createOffer();\r\n        console.log('offer created', offer);\r\n        await connection.setLocalDescription(offer);\r\n        socket.emit('offer', {receiverSocketId: remoteSocketId, offer: offer});\r\n    }\r\n};\r\n\r\nexport const sendDataToConnection = (dataChannel, data) => async (dispatch, getState) => {\r\n    if (dataChannel) {\r\n        const serializedData = JSON.stringify(data);\r\n        dataChannel.send(serializedData);\r\n    }\r\n};\r\n\r\nexport const joinRoom = (roomId, password) => async (dispatch, getState) => { // TODO move to room actions\r\n    const {socket} = getState().localUser;\r\n\r\n    if (socket) {\r\n        socket.emit('join', {roomId, password, socketId: socket.id},\r\n            // callback: the joining user himself is responsible to establish connections with other users\r\n            async (err, data) => {\r\n                if (!err) {\r\n                    await dispatch(startLocalStream(socket));\r\n                    await dispatch({type: SET_CURRENT_ROOM, payload: {room: data.room}});\r\n                    data.room.joinedUsers.forEach((remoteSocketId) => dispatch(connectWithPeer(remoteSocketId)));\r\n                    console.log(`There are ${data.room.joinedUsers.length}x joinedUsers`);\r\n                } else {\r\n                    dispatch(setCurrentRoomError(err));\r\n                }\r\n            });\r\n    }\r\n};\r\n\r\nexport const introduceYourself = (dataChannel) => async (dispatch, getState) => {\r\n    const {socket, metadata} = getState().localUser;\r\n\r\n    if (socket && metadata) {\r\n        dispatch(sendDataToConnection(dataChannel, {type: 'PEER_INTRODUCTION', payload: {senderSocketId: socket.id, metadata: metadata}}));\r\n    } else {\r\n        console.error('socket and/or metadata not available!');\r\n    }\r\n};\r\n","import {INIT_LOCAL_USER_SOCKET, RESET_LOCAL_USER, SET_LOCAL_USER_LOADING, SET_LOCAL_USER_METADATA} from '../actionTypes';\r\nimport {API_BASE_URL, PORT_SOCKET, HTTPS_ENABLED} from \"../../constants\";\r\nimport io from \"socket.io-client\";\r\nimport {getPersistedData, persistData, serializeQueryString} from '../../utils';\r\nimport {addConnection, initDataChannelListeners, removeConnection} from './connections.actions';\r\nimport {startLocalStream} from \"./streams.actions\";\r\nimport {setCurrentRoomError} from './room.actions';\r\n\r\nexport const resetLocalUser = () => ({type: RESET_LOCAL_USER});\r\n\r\n/**\r\n * Init the socket.io client. Once socket is ready, init the peerJS Peer and store them in the store.\r\n */\r\nexport const initLocalUser = () => async (dispatch, getState) => {\r\n    const metadata = getPersistedData('metadata');\r\n\r\n    if (!getState().localUser.loading) {\r\n        if (!metadata.nickname || !metadata.nickname.length) {\r\n            dispatch(setCurrentRoomError({error: {name: 'RoomError', message: 'Please enter a nickname before joining the room.'}}));\r\n        } else {\r\n            dispatch(initLocalUserSocket(metadata));\r\n        }\r\n    }\r\n};\r\n\r\nconst initLocalUserSocket = (metadata) => async (dispatch, getState) => {\r\n    dispatch({type: SET_LOCAL_USER_LOADING, payload: {loading: true}});\r\n    const protocol = HTTPS_ENABLED ? 'https' : 'http';\r\n    const socket = io(`${protocol}://${API_BASE_URL}:${PORT_SOCKET}`, {\r\n        // transports: ['websocket'],\r\n        secure: HTTPS_ENABLED,\r\n        query: serializeQueryString(metadata)\r\n    });\r\n\r\n    dispatch(initLocalUserSocketListeners(socket));\r\n}\r\n\r\nconst initLocalUserSocketListeners = (socket) => async (dispatch, getState) => {\r\n    socket.on('ready', (socketId) => {\r\n        dispatch({type: INIT_LOCAL_USER_SOCKET, payload: {socket}});\r\n\r\n        socket.on('user-leave', (socketId) => {\r\n            const connection = getState().connections.data[socketId];\r\n            if (connection) {\r\n                dispatch(removeConnection(connection));\r\n            }\r\n        });\r\n\r\n        socket.on('offer', async ({senderSocketId, offer}) => {\r\n            console.log('OFFER received - senderId:', senderSocketId, 'offer:', offer);\r\n\r\n            const configuration = {\r\n                iceServers: [{urls: 'stun:stun.l.google.com:19302'}],\r\n                iceCandidatePoolSize: 1\r\n            };\r\n\r\n            const connection = new RTCPeerConnection(configuration); // TODO check first if one already exists\r\n            connection.socketId = socket.id; // FIXME temporary solution. store as es6 map. do \"new Map(Array.from(m).reverse())\" for reverse lookup\r\n            connection.remoteSocketId = senderSocketId;\r\n\r\n            connection.defaultDataChannel = connection.createDataChannel('default'); // FIXME temporary. create wrapper for RTCPeerConnection\r\n            console.log('--defaultDataChannel created', connection.defaultDataChannel);\r\n            dispatch(initDataChannelListeners(connection.defaultDataChannel));\r\n\r\n            const localStream = await getState().streams.data[socket.id] || dispatch(startLocalStream());\r\n            connection.addStream(localStream); // addStream needs to be called BEFORE attempting to create offer/answer\r\n            await dispatch(addConnection(connection));\r\n\r\n\r\n            await connection.setRemoteDescription(new RTCSessionDescription(offer));\r\n\r\n            const answer = await connection.createAnswer();\r\n            await connection.setLocalDescription(answer);\r\n            socket.emit('answer', {receiverSocketId: senderSocketId, answer: answer})\r\n\r\n        });\r\n\r\n        socket.on('answer', ({senderSocketId, answer}) => {\r\n            const connection = getState().connections.data[senderSocketId];\r\n\r\n            if (connection) {\r\n                console.log('ANSWER received - senderId:', senderSocketId, 'answer:', answer, 'connection:', connection);\r\n                connection.setRemoteDescription(new RTCSessionDescription(answer));\r\n            }\r\n        });\r\n\r\n        socket.on('ice-candidates', ({senderSocketId, iceCandidates}) => {\r\n            const connection = getState().connections.data[senderSocketId];\r\n\r\n            if (connection) {\r\n                console.log('ICE Candidates received - senderId:', senderSocketId);\r\n                iceCandidates.forEach(candidate => connection.addIceCandidate(new RTCIceCandidate(candidate)));\r\n            }\r\n        });\r\n    });\r\n}\r\n\r\nexport const setMetadata = (metadata) => (dispatch, getState) => {\r\n    persistData('metadata', metadata);\r\n    dispatch({type: SET_LOCAL_USER_METADATA, payload: {metadata}});\r\n};\r\n","export const IS_LOCALHOST = process.env.NODE_ENV === 'development';\r\n\r\nexport const API_BASE_URL = IS_LOCALHOST ? 'localhost' : process.env.REACT_APP_API_BASE_URL;\r\nexport const HTTPS_ENABLED = IS_LOCALHOST ? false : process.env.REACT_APP_HTTPS_ENABLED === 'true';\r\n\r\nexport const PORT_SOCKET = process.env.REACT_APP_PORT_SOCKET;\r\n\r\nexport const FRONTEND_URL = IS_LOCALHOST ? 'localhost' : process.env.REACT_APP_FRONTEND_URL;\r\n","import React, {useState} from 'react';\r\nimport {Link} from \"react-router-dom\";\r\nimport { ThemeProvider, makeStyles } from '@material-ui/core/styles';\r\nimport theme from '../../style/theme/MainTheme';\r\nimport Box from '@material-ui/core/Box';\r\nimport Typography from '@material-ui/core/Typography';\r\nimport TextField from '@material-ui/core/TextField';\r\nimport Button from '@material-ui/core/Button';\r\nimport ArrowBackIosIcon from '@material-ui/icons/ArrowBackIos';\r\nimport {resetLocalUser, setMetadata} from \"../../store/actions/localUser.actions\";\r\nimport {connect} from \"react-redux\";\r\nimport {setCurrentRoomError} from \"../../store/actions/room.actions\";\r\nimport Grid from '@material-ui/core/Grid';\r\n\r\nconst useStyles = makeStyles ({\r\n    containerStyle: {\r\n        display: 'flex',\r\n        justifyContent: 'center',\r\n        paddingTop: '128px'\r\n    },\r\n    titleStyle: {\r\n        display: 'flex',\r\n        justifyContent: 'center',\r\n        width: '100%',\r\n        padding: '16px',\r\n        color: 'white',\r\n        fontWeight: 'bold',\r\n        backgroundColor: '#388E3C',\r\n    },\r\n    nicknameStyle: {\r\n        width: '90%',\r\n        margin: '16px',\r\n    },\r\n    textfieldLink: {\r\n        width: '90%',\r\n        marginRight: '16px',\r\n        marginLeft: '16px',\r\n    },\r\n    nextButton: {\r\n        color: 'white',\r\n        boxShadow: 'none',\r\n        width: '100%',\r\n\r\n    },\r\n    alignbutton: {\r\n        display: 'flex',\r\n        justifyContent: 'center',\r\n        width: '80%',\r\n        marginTop: '24px',\r\n        marginBottom: '24px'\r\n    }\r\n});\r\n\r\nconst RoomLobby = ({history, match, setMetadata, nickname, roomError, setCurrentRoomError, resetLocalUser}) => {\r\n    const [newNickname, setNewNickname] = useState(nickname);\r\n    const [link, setLink] = useState(match.params.roomId);\r\n    const classes = useStyles();\r\n\r\n    const handleChangeName = (e) => {\r\n        setNewNickname(e.target.value)\r\n    };\r\n\r\n    const handleChangeLink = (e) => {\r\n        setLink(e.target.value)\r\n    };\r\n\r\n    const handleKeyPress = (e) => {\r\n        if(e.key === 'Enter') {\r\n            handleJoin()\r\n        }\r\n    }\r\n\r\n    const handleJoin = (e) => {\r\n        setMetadata({nickname: newNickname});\r\n        setCurrentRoomError(null);\r\n        resetLocalUser();\r\n        history.push(`/rooms/${match.params.roomId}`);\r\n    };\r\n\r\n    return (\r\n        <ThemeProvider theme={theme}>\r\n            <Box display='flex' height={63} bgcolor='#2E7D32' alignItems='center' paddingLeft='36px'>\r\n                <Link to=\"/\" style={{ textDecoration: 'none', color: 'white'}}><ArrowBackIosIcon/></Link>\r\n            </Box>\r\n            <Grid container className={classes.containerStyle}>\r\n                <Grid item xs={11} md={6} lg={5}>\r\n                    <Box display='flex' flexDirection='column' alignItems='center' width={'100%'} borderRadius='5px' bgcolor='white'>\r\n                        <Typography variant='h4' className={classes.titleStyle}>Enter the room</Typography>\r\n                        <TextField\r\n                            required\r\n                            id=\"outlined-required\"\r\n                            label=\"Nickname\"\r\n                            variant=\"outlined\"\r\n                            value={newNickname}\r\n                            className={classes.nicknameStyle}\r\n                            onChange={handleChangeName}\r\n                            onKeyPress={handleKeyPress}\r\n                            autoFocus\r\n                        />\r\n                        <TextField\r\n                            required\r\n                            id=\"outlined-required\"\r\n                            label=\"Room ID\"\r\n                            variant=\"outlined\"\r\n                            value={link}\r\n                            className={classes.textfieldLink}\r\n                            onChange={handleChangeLink}\r\n                        />\r\n                        <div className={classes.alignbutton}>\r\n                            <Button onClick={handleJoin} size=\"large\" color=\"secondary\" variant=\"contained\" className={classes.nextButton}>\r\n                                join\r\n                            </Button>\r\n                        </div>\r\n                        {roomError && <Box color={'red'} textAlign={'center'}>{roomError.error.message}</Box>}\r\n                    </Box>\r\n                </Grid>\r\n            </Grid>\r\n        </ThemeProvider>\r\n    )\r\n};\r\n\r\nconst mapStateToProps = (state) => ({\r\n    nickname: state.localUser.metadata.nickname || '',\r\n    roomError: state.room.error\r\n});\r\n\r\nexport default connect(mapStateToProps, {setMetadata, setCurrentRoomError, resetLocalUser})(RoomLobby);\r\n","import {SET_PLUGIN} from \"../actionTypes\";\r\nimport {sendDataToConnection} from \"./connections.actions\";\r\n\r\nexport const setPlugin = plugin => (dispatch, getState) => {\r\n    // temporary simplified action\r\n    if (plugin) {\r\n        dispatch({type: SET_PLUGIN, payload: {plugin}});\r\n    }\r\n};\r\n\r\nconst sendPluginMessageToAllConnections = (evt) => (dispatch, getState) => {\r\n    const connections = Object.values(getState().connections.data);\r\n    const data = {type: 'PLUGIN_DATA', payload: evt.data.payload};\r\n    connections.forEach(connection => {\r\n         dispatch(sendDataToConnection(connection.defaultDataChannel, data)); // TODO seperate dataChannel exclusive for plugin data\r\n     });\r\n};\r\n\r\nconst sendPluginMessageToConnection = (evt) => (dispatch, getState) => {\r\n    const {peerId, payload} = evt.data;\r\n    const connection = getState().connections.data[peerId];\r\n    const data = {type: 'PLUGIN_DATA', payload: payload};\r\n    dispatch(sendDataToConnection(connection.defaultDataChannel, data));\r\n};\r\n\r\n// const handlePluginRequestLocalPeer = () => (dispatch, getState) => {\r\n//     try {\r\n//         // TODO verify plugin has PLUGIN_REQUEST_LOCAL_PEER listed in required permissions and user accepted it on start of plugin\r\n//         //  A plugin will have some kind of manifest file (potentially just a .json) for all kinds of metadata like required permissions, name, max users etc\r\n//         // TODO when opening any plugin for the first time, a prompt opens informing user of the required permissions\r\n//         //  he also needs to give his consent by clicking a button which will whitelist the plugin (localstorage for the beginning)\r\n//         const peerId = getState().localUser.peer.id;\r\n//         const data = {type: 'PLUGIN_REQUEST_LOCAL_PEER_GRANT', payload: {peer: peerId}};\r\n//\r\n//         const iframe = getState().plugin.iframe;\r\n//         if (iframe) {\r\n//             iframe.contentWindow.postMessage(data, \"*\");\r\n//         }\r\n//     } catch (err) {\r\n//         console.error('handleRequestLocalPeer error', err);\r\n//     }\r\n// };\r\n\r\nconst pluginMessageActions = {\r\n    'PLUGIN_SEND_TO_ALL_PEERS': sendPluginMessageToAllConnections,\r\n    'PLUGIN_SEND_TO_PEER': sendPluginMessageToConnection,\r\n    // 'PLUGIN_REQUEST_LOCAL_PEER': handlePluginRequestLocalPeer,\r\n    'PLUGIN_PLATFORM_CONTROL_REQUEST': () => console.log('plugin is requesting something from the platform (mute local user, rumble screen, etc')\r\n};\r\n\r\nexport const handlePluginMessage = (evt) => async (dispatch, getState) => {\r\n    if (evt.data.type && evt.data.type.startsWith('PLUGIN')) {\r\n        const action = pluginMessageActions[evt.data.type];\r\n        dispatch(action(evt))\r\n    }\r\n}\r\n","import React, {useEffect, useRef} from 'react';\r\nimport {Box} from \"@material-ui/core\";\r\nimport {connect} from \"react-redux\";\r\nimport {handlePluginMessage, setPlugin} from \"../../../store/actions/plugin.actions\";\r\n\r\nconst RoomPluginContent = ({plugin, handlePluginMessage, setPlugin}) => {\r\n    const iframeRef = useRef();\r\n\r\n    useEffect(() => {\r\n        const handleMessage = (evt) => {\r\n            handlePluginMessage(evt);\r\n        };\r\n        window.addEventListener('message', handleMessage);\r\n        return () => window.removeEventListener('message', handleMessage);\r\n        // eslint-disable-next-line react-hooks/exhaustive-deps\r\n    }, []);\r\n\r\n    useEffect(() => {\r\n        if (iframeRef && iframeRef.current) {\r\n            setPlugin({...plugin, iframe: iframeRef.current});\r\n        }\r\n        // eslint-disable-next-line react-hooks/exhaustive-deps\r\n    }, [iframeRef, plugin.url]);\r\n\r\n    return (\r\n        <Box flexGrow={1}>\r\n            {plugin && plugin.url && <iframe src={plugin.url} style={{width: '100%', height: '100%', border: 'none'}} ref={iframeRef} title={'plugin'} />}\r\n        </Box>\r\n    );\r\n};\r\n\r\nconst mapStateToProps = (state) => ({\r\n    plugin: state.plugin\r\n});\r\n\r\nexport default connect(mapStateToProps, {handlePluginMessage, setPlugin})(RoomPluginContent);\r\n","import React, {useEffect, useRef} from 'react';\r\nimport {Box, Card, CircularProgress, makeStyles} from \"@material-ui/core\";\r\nimport {setVideoSrc} from \"../../../utils\";\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n    root: {\r\n        display: 'flex',\r\n    },\r\n    cardWrapper: {\r\n        position: 'relative',\r\n        display: 'flex',\r\n        flexFlow: 'column nowrap',\r\n        marginBottom: '5px',\r\n        width: '100%',\r\n        height: '130px',\r\n    },\r\n    media: {\r\n        width: '100%',\r\n        height: '100%',\r\n        objectFit: 'cover'\r\n    },\r\n    displayName: {\r\n        color: 'white',\r\n        opacity: '0.8',\r\n        position: 'absolute',\r\n        bottom: '5px',\r\n        left: '5px',\r\n        fontSize: '0.9rem',\r\n        userSelect: 'none'\r\n    }\r\n}));\r\n\r\nconst GenericMediaCard = ({stream, muted = false, user}) => {\r\n    const classes = useStyles();\r\n    const videoRef = useRef(null);\r\n    const {nickname} = user;\r\n\r\n    useEffect(() => {\r\n        setVideoSrc(videoRef, stream, muted);\r\n        // eslint-disable-next-line react-hooks/exhaustive-deps\r\n    }, [stream]);\r\n\r\n    return (\r\n        <Card className={classes.cardWrapper}>\r\n            {stream\r\n                ? <video ref={videoRef} className={classes.media} />\r\n                : <CircularProgress color=\"inherit\" />\r\n            }\r\n            <Box className={classes.displayName}>{nickname}</Box>\r\n        </Card>\r\n    );\r\n};\r\n\r\nexport default GenericMediaCard;\r\n","import React from 'react';\r\nimport GenericMediaCard from \"../../GenericMediaCard/GenericMediaCard\";\r\nimport {connect} from \"react-redux\";\r\n\r\nconst RemoteMediaCard = ({remoteStream, remoteNickname}) => <GenericMediaCard stream={remoteStream} user={{nickname: remoteNickname}} />;\r\n\r\nconst mapStateToProps = (state, ownProps) => {\r\n    const remoteSocketId = ownProps.connection.remoteSocketId;\r\n    const remoteStream = remoteSocketId ? state.streams.data[remoteSocketId] : null;\r\n    const remoteMetadata = state.peers.data[remoteSocketId] ? state.peers.data[remoteSocketId].metadata : {};\r\n    return {\r\n        remoteStream: remoteStream,\r\n        remoteNickname: remoteMetadata.nickname || 'missing Nickname',\r\n    }\r\n};\r\n\r\nexport default connect(mapStateToProps)(RemoteMediaCard);\r\n","import React from 'react';\r\nimport {connect} from \"react-redux\";\r\nimport RemoteMediaCard from \"../RemoteMediaCard/RemoteMediaCard\";\r\n\r\nconst RemoteMediaManager = ({connections}) => {\r\n    return (\r\n        <>\r\n            {connections && connections.map((connection) => <RemoteMediaCard key={'conn' + connection.remoteSocketId} connection={connection} />)}\r\n        </>\r\n    );\r\n};\r\n\r\nconst mapStateToProps = state => ({\r\n    connections: Object.values(state.connections.data)\r\n});\r\n\r\nexport default connect(mapStateToProps)(RemoteMediaManager);\r\n","import React from 'react';\r\nimport {connect} from \"react-redux\";\r\nimport GenericMediaCard from \"../GenericMediaCard/GenericMediaCard\";\r\nimport {Box, makeStyles} from \"@material-ui/core\";\r\nimport RemoteMediaManager from \"./RemoteMediaManager/RemoteMediaManager\";\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n    roomMediaManager: {\r\n        padding: '5px',\r\n        backgroundColor: '#f5deb340',\r\n        borderLeft: '1px solid #0000003b'\r\n    },\r\n}));\r\n\r\nconst RoomMediaManager = ({localStream, localPeerMetadata}) => {\r\n    const classes = useStyles();\r\n\r\n    return (\r\n        <Box bgcolor='lightblue' width={'220px'} minWidth={'150px'} className={classes.roomMediaManager}>\r\n            <GenericMediaCard stream={localStream} muted={true} user={{nickname: localPeerMetadata.nickname}}/>\r\n            <RemoteMediaManager />\r\n        </Box>\r\n    );\r\n};\r\n\r\nconst mapStateToProps = (state) => {\r\n    const socket = state.localUser.socket;\r\n    const localStream = socket ? state.streams.data[socket.id] : null;\r\n    return {\r\n        localPeerMetadata: state.localUser.metadata,\r\n        localStream: localStream,\r\n    }\r\n};\r\n\r\nexport default connect(mapStateToProps, {})(RoomMediaManager);\r\n","import React, {useState} from 'react';\r\nimport {ThemeProvider, makeStyles} from '@material-ui/core/styles';\r\nimport LabelIcon from '@material-ui/icons/Label';\r\nimport WidgetsOutlinedIcon from '@material-ui/icons/WidgetsOutlined';\r\nimport Button from '@material-ui/core/Button';\r\nimport Drawer from '@material-ui/core/Drawer';\r\nimport List from '@material-ui/core/List';\r\nimport Divider from '@material-ui/core/Divider';\r\nimport ListItem from '@material-ui/core/ListItem';\r\nimport ListItemIcon from '@material-ui/core/ListItemIcon';\r\nimport ListItemText from '@material-ui/core/ListItemText';\r\nimport MenuIcon from '@material-ui/icons/Menu';\r\nimport theme from '../../../style/theme/MainTheme';\r\nimport {setPlugin} from \"../../../store/actions/plugin.actions\";\r\nimport {connect} from \"react-redux\";\r\n\r\nconst useStyles = makeStyles({\r\n    list: {\r\n        width: 250,\r\n    },\r\n    menuIcon: {\r\n        margin: '8px'\r\n    }\r\n});\r\n\r\n// TODO this data will be served by the backend in future releases. Not real plugins except first one in the list\r\nconst plugins = [\r\n    {name: 'Random number', url: 'https://andreas-schoch.github.io/p2p-test-plugin/'},\r\n    {name: 'Paint', url: 'https://andreas-schoch.github.io/quackamole-plugin-paint/'},\r\n    {name: 'Gomoku', url: 'https://derpmasters.github.io/quackamole-plugin-gomoku/'},\r\n    {name: '2d Shooter (WIP)', url: 'https://andreas-schoch.github.io/quackamole-plugin-2d-topdown-shooter/'},\r\n    {name: 'Breakout game', url: 'https://andreas-schoch.github.io/breakout-game/'}\r\n];\r\n\r\nconst RoomSidebarMenu = ({plugin, setPlugin}) => {\r\n    const classes = useStyles();\r\n    const [open, setOpen] = useState(false);\r\n\r\n    const toggleDrawer = (event) => {\r\n        if (event.type === 'keydown') {\r\n            return;\r\n        }\r\n        setOpen(!open);\r\n    };\r\n\r\n    const handleSelectPlugin = (evt) => {\r\n        const index = evt.currentTarget.dataset.index;\r\n        setPlugin(plugin ? {...plugin, ...plugins[index]} : plugins[index]);\r\n    };\r\n\r\n    const list = () => (\r\n        <div className={classes.list} role=\"presentation\" onClick={toggleDrawer}>\r\n            <List>\r\n                {plugins.map(({name}, i) => (\r\n                    <ListItem button key={name} onClick={handleSelectPlugin} data-index={i}>\r\n                        <ListItemIcon><LabelIcon/></ListItemIcon>\r\n                        <ListItemText primary={name}/>\r\n                    </ListItem>\r\n                ))}\r\n            </List>\r\n            <Divider/>\r\n            <List>\r\n                <ListItem button>\r\n                    <ListItemIcon><WidgetsOutlinedIcon/></ListItemIcon>\r\n                    <ListItemText primary={'Browse Plugins'}/>\r\n                </ListItem>\r\n            </List>\r\n        </div>\r\n    );\r\n\r\n    return (\r\n        <ThemeProvider theme={theme}>\r\n            <Button>\r\n                <MenuIcon onClick={toggleDrawer} color='primary' fontSize='large' className={classes.menuIcon}/>\r\n                <Drawer open={open} onClose={toggleDrawer} anchor={'left'}>\r\n                    {list()}\r\n                </Drawer>\r\n            </Button>\r\n        </ThemeProvider>\r\n    );\r\n};\r\n\r\nconst mapStateToProps = (state) => ({\r\n    plugin: state.plugin\r\n});\r\n\r\nexport default connect(mapStateToProps, {setPlugin})(RoomSidebarMenu);\r\n","import React from 'react';\r\nimport cx from 'clsx';  // TODO This comes from some example code, it has some nice features but we need to discuss whether we want to use it\r\nimport Grid from '@material-ui/core/Grid';\r\nimport Avatar from '@material-ui/core/Avatar';\r\nimport Typography from '@material-ui/core/Typography';\r\nimport withStyles from '@material-ui/core/styles/withStyles';\r\nimport defaultChatMsgStyles from './ChatStyle';\r\n\r\nconst ChatMsg = withStyles(defaultChatMsgStyles, { name: 'ChatMsg' })(props => {\r\n  const {\r\n    classes,\r\n    avatar,\r\n    messages,\r\n    side,\r\n    GridContainerProps,\r\n    GridItemProps,\r\n    AvatarProps,\r\n    getTypographyProps,\r\n  } = props;\r\n\r\n  const attachClass = index => {\r\n    if (index === 0) {\r\n      return classes[`${side}First`];\r\n    }\r\n    if (index === messages.length - 1) {\r\n      return classes[`${side}Last`];\r\n    }\r\n    return '';\r\n  };\r\n  return (\r\n    <Grid container spacing={2} justify={side === 'right' ? 'flex-end' : 'flex-start'}{...GridContainerProps} className={classes.wrapper}>\r\n      {side === 'left' && (\r\n        <Grid item {...GridItemProps}>\r\n          <Avatar src={avatar}{...AvatarProps} className={cx(classes.avatar, AvatarProps.className)}/>\r\n        </Grid>\r\n      )}\r\n      <Grid item xs={8}>\r\n        {messages.map((msg, i) => {\r\n          const TypographyProps = getTypographyProps(msg, i, props);\r\n          return (\r\n            <div key={msg.id || i} className={classes[`${side}Row`]}>\r\n              <Typography align={'left'} {...TypographyProps} className={cx(classes.msg, classes[side], attachClass(i), TypographyProps.className)}>\r\n                {msg}\r\n              </Typography>\r\n            </div>\r\n          );\r\n        })}\r\n      </Grid>\r\n    </Grid>\r\n  );\r\n});\r\n\r\nChatMsg.defaultProps = {\r\n  avatar: '',\r\n  messages: [],\r\n  side: 'left',\r\n  GridContainerProps: {},\r\n  GridItemProps: {},\r\n  AvatarProps: {},\r\n  getTypographyProps: () => ({}),\r\n};\r\n\r\nexport default ChatMsg;\r\n","export default ({ palette, spacing }) => {\r\n    const radius = spacing(2.5);\r\n    const size = spacing(4);\r\n    const rightBgColor = palette.primary.main;\r\n    return {\r\n      wrapper: {\r\n        \"&:nth-child(1)\": {\r\n          marginTop: 'auto', // https://bugs.chromium.org/p/chromium/issues/detail?id=411624\r\n        }\r\n      },\r\n      avatar: {\r\n        width: size,\r\n        height: size,\r\n      },\r\n      leftRow: {\r\n        textAlign: 'left',\r\n      },\r\n      rightRow: {\r\n        textAlign: 'right',\r\n      },\r\n      msg: {\r\n        padding: spacing(1, 2),\r\n        borderRadius: 4,\r\n        marginBottom: 4,\r\n        display: 'inline-block',\r\n        wordBreak: 'break-word',\r\n        fontFamily:\r\n          '-apple-system, BlinkMacSystemFont, \"Segoe UI\", Roboto, Helvetica, Arial, sans-serif, \"Apple Color Emoji\", \"Segoe UI Emoji\", \"Segoe UI Symbol\"',\r\n        fontSize: '14px',\r\n      },\r\n      left: {\r\n        borderTopRightRadius: radius,\r\n        borderBottomRightRadius: radius,\r\n        backgroundColor: palette.grey[100],\r\n      },\r\n      right: {\r\n        borderTopLeftRadius: radius,\r\n        borderBottomLeftRadius: radius,\r\n        backgroundColor: rightBgColor,\r\n        color: palette.common.white,\r\n      },\r\n      leftFirst: {\r\n        borderTopLeftRadius: radius,\r\n      },\r\n      leftLast: {\r\n        borderBottomLeftRadius: radius,\r\n      },\r\n      rightFirst: {\r\n        borderTopRightRadius: radius,\r\n      },\r\n      rightLast: {\r\n        borderBottomRightRadius: radius,\r\n      },\r\n    };\r\n  };\r\n","import React, {useState, useRef, useEffect} from 'react';\r\nimport ChatMsg from './ChatMsg';\r\nimport TextField from '@material-ui/core/TextField';\r\nimport SendIcon from '@material-ui/icons/Send';\r\nimport {makeStyles} from '@material-ui/core/styles';\r\nimport {connect} from \"react-redux\";\r\nimport {sendMessage} from '../../../../store/actions/chat.actions';\r\nimport {toArray} from \"react-emoji-render\";\r\n\r\nconst useStyles = makeStyles({\r\n    chat: {\r\n        height: '100vh',\r\n        display: 'flex',\r\n        flexFlow: 'column nowrap',\r\n        width: '320px'\r\n    },\r\n    chatFeed: {\r\n        display: 'flex',\r\n        flexFlow: 'column nowrap',\r\n        flexGrow: 1,\r\n        maxHeight: 'calc(100% - 60px)',\r\n        overflow: 'auto',\r\n        padding: '8px'\r\n    },\r\n    chatInput: {\r\n        display: 'flex',\r\n        flexFlow: 'row nowrap',\r\n        alignItems: 'flex-end',\r\n        padding: '8px'\r\n    },\r\n    chatInputTextfield: {\r\n        flexGrow: 1,\r\n        zIndex: 1000,\r\n        backgroundColor: 'white'\r\n    },\r\n    chatInputSendBtn: {\r\n        fontSize: '40px',\r\n        margin: 'auto 5px',\r\n        cursor: 'pointer',\r\n        opacity: 0.8,\r\n        transition: 'opacity 0.2s',\r\n        '&:hover': {\r\n            opacity: 0.95\r\n        }\r\n    }\r\n});\r\n\r\nconst Chat = ({chatData, sendMessage, socket}) => {\r\n    const classes = useStyles('');\r\n    const [newMessage, setNewMessage] = useState('');\r\n    const feedRef = useRef(null);\r\n\r\n    useEffect(() => {\r\n        if (feedRef.current) {\r\n            feedRef.current.scrollTop = feedRef.current.scrollHeight;\r\n        }\r\n    }, [chatData]);\r\n\r\n    const handleChangeTexfield = (event) => {\r\n        setNewMessage(event.target.value)\r\n    };\r\n\r\n    const handleKeyPress = (event) => {\r\n        if (event.key === 'Enter') {\r\n            if (event.shiftKey) {\r\n                setNewMessage(newMessage.concat('\\n'));\r\n            } else {\r\n                send(event);\r\n            }\r\n        }\r\n    };\r\n\r\n    const send = (e) => {\r\n        e.preventDefault();\r\n        if (newMessage.replace(/\\n/g, '').length) {\r\n            sendMessage(newMessage);\r\n            setNewMessage('');\r\n        }\r\n    };\r\n\r\n    const parseEmojis = value => {\r\n        // toArray outputs React elements for emojis and strings for other\r\n        return toArray(value).reduce((previous, current) => {\r\n          if (typeof current === 'string') {\r\n            return previous + current;\r\n          }\r\n          return previous + current.props.children;\r\n        }, '');\r\n      };\r\n\r\n    //handle the chat feed to display all messages on the right position\r\n      const chatMessages = chatData.map((message, i) => message.authorSocketId === socket.id\r\n          ? <ChatMsg key={i} side={'right'} messages={[parseEmojis(message.text)]}/>\r\n          : <ChatMsg key={i} avatar={''} messages={[parseEmojis(message.text)]}/>\r\n      );\r\n\r\n    return (\r\n        <div className={classes.chat}>\r\n\r\n            <div className={classes.chatFeed} ref={feedRef}>\r\n                {chatMessages}\r\n            </div>\r\n\r\n            <div className={classes.chatInput}>\r\n                <TextField\r\n                    variant=\"outlined\"\r\n                    multiline\r\n                    rowsMax={5}\r\n                    className={classes.chatInputTextfield}\r\n                    onChange={handleChangeTexfield}\r\n                    onKeyPress={handleKeyPress}\r\n                    value={newMessage}\r\n                    autoFocus\r\n                />\r\n                <SendIcon className={classes.chatInputSendBtn} onClick={send}/>\r\n            </div>\r\n        </div>\r\n    )\r\n};\r\n\r\nconst mapStateToProps = state => ({\r\n    chatData: state.chat,\r\n    socket: state.localUser.socket,\r\n});\r\n\r\nexport default connect(mapStateToProps, {sendMessage})(Chat);\r\n","import {ADD_NEW_MESSAGE} from '../actionTypes';\r\nimport {sendDataToConnection} from './connections.actions';\r\n\r\nexport const sendMessage = (text) => async (dispatch, getState) => {\r\n    const connections = Object.values(getState().connections.data);\r\n    const socket = getState().localUser.socket;\r\n\r\n    if (socket) {\r\n        connections.forEach(connection => {\r\n            // FIXME change to use separate data channel only for chat instead of identifying it by type or specific properties\r\n            const message = {\r\n                textMessage: { text: text, authorSocketId: socket.id }\r\n            };\r\n\r\n            dispatch(sendDataToConnection(connection.defaultDataChannel, message));\r\n        });\r\n\r\n        dispatch({\r\n            type: ADD_NEW_MESSAGE,\r\n            payload: {text: text, authorSocketId: socket.id}\r\n        });\r\n    } else {\r\n        console.error('socket not found');\r\n    }\r\n};\r\n","import React, {useState} from 'react';\r\nimport {ThemeProvider} from '@material-ui/core/styles';\r\nimport ChatIcon from '@material-ui/icons/Chat';\r\nimport Button from '@material-ui/core/Button';\r\nimport Drawer from '@material-ui/core/Drawer';\r\nimport theme from '../../../style/theme/MainTheme';\r\nimport Chat from './Chat/Chat';\r\n\r\nconst RoomSidebarChat = () => {\r\n    const [open, setOpen] = useState(false);\r\n\r\n    const toggleDrawer = _ => setOpen(!open);\r\n\r\n    return (\r\n        <ThemeProvider theme={theme}>\r\n            <Button onClick={toggleDrawer}>\r\n                <ChatIcon color='primary' fontSize='large' />\r\n            </Button>\r\n            <Drawer open={open} onClose={toggleDrawer} anchor={'right'}>\r\n                <Chat/>\r\n            </Drawer>\r\n        </ThemeProvider>\r\n    );\r\n};\r\n\r\nexport default RoomSidebarChat;\r\n","import React from 'react';\r\nimport {Box} from \"@material-ui/core\";\r\nimport HomeIcon from '@material-ui/icons/Home';\r\nimport Button from '@material-ui/core/Button';\r\nimport RoomSidebarMenu from \"../RoomSidebarMenu/RoomSidebarMenu\";\r\nimport RoomSidebarChat from \"../RoomSidebarChat/RoomSidebarChat\";\r\nimport {Link} from \"react-router-dom\";\r\n\r\n// TODO actionbar needs some rework.\r\nconst RoomActionbar = () => {\r\n    return (\r\n        <Box bgcolor={'#f5deb3eb'} height={'10%'} display='flex' justifyContent={'center'} borderTop={'1px solid #0000003b'} alignItems={'center'}>\r\n            <RoomSidebarMenu />\r\n            <Link to={'/'} style={{height: '100%'}}>\r\n                <Button style={{height: '100%'}}>\r\n                    <HomeIcon color='primary' fontSize='large'/>\r\n                </Button>\r\n            </Link>\r\n            <RoomSidebarChat />\r\n        </Box>\r\n    );\r\n};\r\n\r\nexport default RoomActionbar;\r\n","import React, {useEffect} from 'react';\r\nimport {Box} from \"@material-ui/core\";\r\nimport RoomPluginContent from \"./RoomPluginContent/RoomPluginContent\";\r\nimport RoomMediaManager from \"./RoomMediaManager/RoomMediaManager\";\r\nimport {connect} from \"react-redux\";\r\nimport {joinRoom} from \"../../store/actions/connections.actions\";\r\nimport {initLocalUser} from \"../../store/actions/localUser.actions\";\r\nimport RoomActionbar from \"./RoomActionbar/RoomActionbar\";\r\nimport {roomExitCleanup} from '../../store/actions/room.actions';\r\nimport {startLocalStream} from '../../store/actions/streams.actions';\r\n\r\nconst Room = ({socket, match, history, initLocalUser, joinRoom, roomError, currentRoom, localPeerLoading, roomExitCleanup, startLocalStream}) => {\r\n\r\n    useEffect(() => {\r\n        if (roomError) {\r\n            history.push(`/room-lobby/${match.params.roomId}`);\r\n        } else if (!socket && !localPeerLoading) {\r\n            console.log('Room#useEffect before initLocalUser');\r\n            initLocalUser();\r\n        } else if (socket && socket.id && !currentRoom.id) {\r\n            console.log('Room#useEffect before joinRoom');\r\n            startLocalStream();\r\n            joinRoom(match.params.roomId, 'dummy123');\r\n        }\r\n        // eslint-disable-next-line react-hooks/exhaustive-deps\r\n    }, [roomError, socket]);\r\n\r\n    useEffect(() => {\r\n        // unmount\r\n        return () => roomExitCleanup();\r\n        // eslint-disable-next-line react-hooks/exhaustive-deps\r\n    }, []);\r\n\r\n    return (\r\n        <>\r\n            <Box display='flex' flexDirection='column' width={1} height={'100%'} justifyContent={'space-between'} >\r\n                <Box display='flex' flexDirection='row' width={1} height={'90%'} justifyContent={'space-between'}>\r\n                    <RoomPluginContent/>\r\n                    <RoomMediaManager />\r\n                </Box>\r\n                <RoomActionbar />\r\n            </Box>\r\n        </>\r\n    );\r\n};\r\n\r\nconst mapStateToProps = (state) => {\r\n    return {\r\n        socket: state.localUser.socket,\r\n        localPeerLoading: state.localUser.loading,\r\n        roomError: state.room.error,\r\n        currentRoom: state.room.data\r\n    };\r\n};\r\n\r\nexport default connect(mapStateToProps, {initLocalUser, joinRoom, roomExitCleanup, startLocalStream})(Room);\r\n","import React from 'react';\r\nimport {makeStyles} from '@material-ui/core/styles';\r\nimport AssessmentOutlinedIcon from '@material-ui/icons/AssessmentOutlined';\r\nimport CallOutlinedIcon from '@material-ui/icons/CallOutlined';\r\nimport VideogameAssetIcon from '@material-ui/icons/VideogameAsset';\r\nimport Typography from '@material-ui/core/Typography';\r\nimport {useMediaQuery} from '@material-ui/core';\r\n\r\nconst useStyles = makeStyles({\r\n    container: {\r\n        display: 'flex',\r\n        flexDirection: 'column',\r\n        alignItems: 'center',\r\n        width: 314,\r\n        height: 400,\r\n        border: 'solid 1px lightgrey',\r\n        backgroundColor: 'white'\r\n    },\r\n    smallScreenContainer: {\r\n        display: 'flex',\r\n        flexDirection: 'column',\r\n        alignItems: 'center',\r\n        width: 314,\r\n        height: 400,\r\n        border: 'solid 1px lightgrey',\r\n        backgroundColor: 'white',\r\n        margin: 8,\r\n    },\r\n    alignTitle: {\r\n        display: 'flex',\r\n        margin: 24\r\n    },\r\n    customizeTitle: {\r\n        fontWeight: 'bold',\r\n        marginLeft: 4\r\n    },\r\n    customizeIcon: {\r\n        marginRight: 4\r\n    },\r\n    customizeText: {\r\n        paddingLeft: 16,\r\n        paddingRight: 16,\r\n        marginBottom: 16\r\n    }\r\n});\r\n\r\nconst BulletPoint = (props) => {\r\n    const classes = useStyles();\r\n    const smallScreen = useMediaQuery(\"(max-width: 950px)\");\r\n\r\n    const checkIcons = (icon) => {\r\n        if(icon === 'VideogameAssetIcon') {\r\n            return <VideogameAssetIcon fontSize='large' className={classes.customizeIcon}/>\r\n        } else if(icon === 'AssessmentOutlinedIcon') {\r\n            return <AssessmentOutlinedIcon fontSize='large' className={classes.customizeIcon}/>\r\n        } else if(icon === 'CallOutlinedIcon') {\r\n            return <CallOutlinedIcon fontSize='large' className={classes.customizeIcon}/>\r\n        }\r\n    };\r\n\r\n    return (\r\n        <div className={smallScreen ? classes.smallScreenContainer : classes.container}>\r\n            <div className={classes.alignTitle}>\r\n                {checkIcons(props.content.icon)}\r\n                <Typography variant='h5' className={classes.customizeTitle}>{props.content.title}</Typography>\r\n            </div>\r\n            <Typography className={classes.customizeText} align='center'>{props.content.text}</Typography>\r\n            <img src={props.content.image} height='181' width='275' alt='icon' />\r\n        </div>\r\n    )\r\n};\r\nexport default BulletPoint;\r\n","import React from 'react';\r\nimport {ThemeProvider, makeStyles} from '@material-ui/core/styles';\r\nimport Typography from '@material-ui/core/Typography';\r\nimport theme from '../../style/theme/MainTheme';\r\nimport Box from '@material-ui/core/Box';\r\nimport Button from '@material-ui/core/Button';\r\nimport {Link} from \"react-router-dom\";\r\nimport BulletPoint from \"./BulletPoint/BulletPoint\";\r\nimport {useMediaQuery} from '@material-ui/core';\r\n\r\nconst useStyles = makeStyles({\r\n    header: {\r\n        color: 'white',\r\n        textTransform: 'uppercase',\r\n        display: 'flex',\r\n        justifyContent: 'center',\r\n        alignItems: 'center'\r\n    },\r\n    box: {\r\n        display: 'flex',\r\n        width: '100%',\r\n        height: '100%',\r\n        justifyContent: 'center'\r\n    },\r\n    smallScreenBox: {\r\n        display: 'flex',\r\n        flexDirection: 'column',\r\n        width: '100%',\r\n        height: '100%',\r\n        alignItems: 'center'\r\n    },\r\n    titleContainer: {\r\n        display: 'flex',\r\n        flexDirection: 'column',\r\n        alignItems: 'center',\r\n        width: '40%',\r\n        minWidth: 310,\r\n    },\r\n    titleStyle: {\r\n        color: 'white',\r\n        fontWeight: 'bold',\r\n        marginTop: '98px'\r\n    },\r\n    buttonStyle: {\r\n        borderRadius: '5px',\r\n        // width: '106px',\r\n        fontWeight: 'bold',\r\n        color: 'white',\r\n        backgroundColor: '#FBC02D',\r\n        '&:hover': {\r\n            backgroundColor: '#f9a825',\r\n        },\r\n        '&:focus': {\r\n            outline: 0,\r\n        }\r\n    },\r\n    mainImg: {\r\n        display: 'flex',\r\n        height: 224,\r\n        width: 309,\r\n        borderRadius: 5,\r\n        marginTop: 76,\r\n        marginLeft: 36,\r\n        marginRight: 36,\r\n    },\r\n    smallScreenMainImg: {\r\n        display: 'flex',\r\n        height: 224,\r\n        width: 309,\r\n        borderRadius: 5,\r\n        margin: 36,\r\n    },\r\n    bulletPoints: {\r\n        display: 'flex',\r\n        justifyContent: 'center',\r\n        zIndex: '3',\r\n        position: 'relative',\r\n        bottom: 150,\r\n    },\r\n    smallScreenBulletPoints: {\r\n        display: 'flex',\r\n        flexDirection: 'column',\r\n        alignItems: 'center',\r\n        marginTop: 72,\r\n    }\r\n});\r\n\r\nconst Home = () => {\r\n    const classes = useStyles();\r\n    const smallScreen = useMediaQuery(\"(max-width: 950px)\");\r\n    const bulletPoints = [\r\n        {\r\n            title: 'Gaming',\r\n            icon: 'VideogameAssetIcon',\r\n            image: 'https://via.placeholder.com/400x300',\r\n            text: 'Lorem ipsum dolor sit amet, consectetur adipiscing elit. Donec nec urna dolor. Maecenas vehicula dui ut quam imperdiet.',\r\n        },\r\n        {\r\n            title: 'Working',\r\n            icon: 'AssessmentOutlinedIcon',\r\n            image: 'https://via.placeholder.com/400x300',\r\n            text: 'Lorem ipsum dolor sit amet, consectetur adipiscing elit. Donec nec urna dolor. Maecenas vehicula dui ut quam imperdiet.',\r\n        },\r\n        {\r\n            title: 'Chatting',\r\n            icon: 'CallOutlinedIcon',\r\n            image: 'https://via.placeholder.com/400x300',\r\n            text: 'Lorem ipsum dolor sit amet, consectetur adipiscing elit. Donec nec urna dolor. Maecenas vehicula dui ut quam imperdiet.',\r\n        }\r\n    ];\r\n\r\n    return (\r\n        <ThemeProvider theme={theme}>\r\n            {/* Header */}\r\n            <Box height={63} bgcolor='#2E7D32' className={classes.header}>\r\n                <h1>\r\n                    <span role={'img'} aria-label={'a duck'}> </span>\r\n                    Quackamole\r\n                    <span role={'img'} aria-label={'an avocado'}> </span>\r\n                </h1>\r\n            </Box>\r\n\r\n            {/* Body */}\r\n            <Box height={540} display='flex' zIndex={1}>\r\n                <Box className={smallScreen ? classes.smallScreenBox : classes.box} bgcolor= '#388E3C'>\r\n                    <div className={classes.titleContainer}>\r\n                    <Typography variant='h3' className={classes.titleStyle} gutterBottom align='center'>\r\n                        Peer-to-peer video chat platform\r\n                    </Typography>\r\n                    <Link to=\"/create-room\" style={{textDecoration: 'none'}}>\r\n                        <Button size=\"large\" className={classes.buttonStyle}>Create a room</Button>\r\n                    </Link>\r\n                    </div>\r\n                    <img\r\n                        src='https://via.placeholder.com/400x300'\r\n                        className={smallScreen ? classes.smallScreenMainImg : classes.mainImg}\r\n                        alt={'quackamole room preview'}\r\n                    />\r\n                </Box>\r\n            </Box>\r\n\r\n            {/* Bullet Points */}\r\n            <div className={smallScreen ? classes.smallScreenBulletPoints : classes.bulletPoints}>\r\n                {bulletPoints.map((data, i) => <BulletPoint content={data} key={data.title + i}> </BulletPoint>)}\r\n            </div>\r\n\r\n            {/*Temporary for debugging purposes*/}\r\n            <Link to={'/rooms/dummy-room-id'}>Test room</Link>\r\n        </ThemeProvider>\r\n    )\r\n};\r\n\r\nexport default Home;\r\n","import React from 'react';\r\nimport {Link} from \"react-router-dom\";\r\nimport { ThemeProvider, makeStyles } from '@material-ui/core/styles';\r\nimport theme from '../../style/theme/MainTheme';\r\nimport Box from '@material-ui/core/Box';\r\nimport Typography from '@material-ui/core/Typography';\r\nimport TextField from '@material-ui/core/TextField';\r\nimport Button from '@material-ui/core/Button';\r\nimport ArrowBackIosIcon from '@material-ui/icons/ArrowBackIos';\r\nimport {API_BASE_URL, HTTPS_ENABLED, FRONTEND_URL, PORT_SOCKET, IS_LOCALHOST} from '../../constants';\r\nimport {isIpAddress} from \"../../utils\";\r\nimport Grid from '@material-ui/core/Grid';\r\nimport {useHistory} from 'react-router-dom';\r\n\r\n\r\nconst useStyles = makeStyles({\r\n    containerStyle: {\r\n        display: 'flex',\r\n        justifyContent: 'center',\r\n        paddingTop: '128px'\r\n    },\r\n    titleStyle: {\r\n        display: 'flex',\r\n        justifyContent: 'center',\r\n        padding: '16px',\r\n        color: 'white',\r\n        fontWeight: 'bold',\r\n        backgroundColor: '#388E3C',\r\n        width: '100%'\r\n    },\r\n    formControl: {\r\n        width: '20%',\r\n        margin: '16px'\r\n    },\r\n    select: {\r\n        borderColor: '#FB8C00',\r\n        '&:before': {\r\n            borderColor: '#FB8C00',\r\n        },\r\n        '&:after': {\r\n            borderColor: '#f57c00',\r\n        }\r\n    },\r\n    textfield: {\r\n        width: '90%',\r\n        marginTop: '48px',\r\n    },\r\n    textfieldLink: {\r\n        width: '90%',\r\n        marginRight: '16px',\r\n        marginLeft: '16px',\r\n    },\r\n    alignButton: {\r\n        display: 'flex',\r\n        justifyContent: 'flex-end',\r\n        width: '100%',\r\n        margin: '16px',\r\n    },\r\n    myButton: {\r\n        color: 'white',\r\n        boxShadow: 'none',\r\n        margin: '16px',\r\n    },\r\n    paper: {\r\n        padding: theme.spacing(2),\r\n        textAlign: 'center',\r\n        color: theme.palette.text.secondary,\r\n      },\r\n    copyLink: {\r\n        display: 'flex',\r\n        alignItems: 'center',\r\n        marginTop: '16px',\r\n        width: '90%'\r\n    },\r\n    nextButton: {\r\n        color: 'white',\r\n        boxShadow: 'none',\r\n        marginBottom: '16px',\r\n        width: '100%'\r\n    },\r\n    subtitle: {\r\n        display: 'flex',\r\n        justifyContent: 'center',\r\n        margin: '16px'\r\n    }\r\n});\r\n\r\nconst RoomCreateForm = () => {\r\n    const [name, setName] = React.useState('');\r\n    const [link, setLink] = React.useState('');\r\n    const [roomId, setRoomId] = React.useState('');\r\n    const [active, setActive] = React.useState(true);\r\n    const classes = useStyles();\r\n    const history = useHistory();\r\n\r\n    const handleChangeTexfield = (event) => {\r\n        setName(event.target.value)\r\n    };\r\n\r\n    const handleKeyPress = (event) => {\r\n        if (active) {\r\n            if (event.key === 'Enter') {\r\n                createRoom()\r\n            }\r\n        } else {\r\n            history.push(`/room-lobby/${roomId}`)\r\n        }\r\n    };\r\n\r\n    const createRoom = () => {\r\n        let data = {\r\n            name: name,\r\n            password: 'Test123.',\r\n            maxUsers: 4\r\n        };\r\n\r\n        if(name.length > 0) {\r\n            const protocol = HTTPS_ENABLED ? 'https':'http';\r\n            fetch(`${protocol}://${API_BASE_URL}:${PORT_SOCKET}/api/rooms`, {\r\n                method: 'post',\r\n                body: JSON.stringify(data),\r\n                headers: {\r\n                    'Content-Type': 'application/json'\r\n                  },\r\n            }).then(response => response.json()\r\n            ).then( data => {\r\n                const port = isIpAddress(FRONTEND_URL) || IS_LOCALHOST ? ':3000' : '';\r\n                setLink(`${protocol}://${FRONTEND_URL}${port}/#/room-lobby/${data}`);\r\n                setRoomId(data);\r\n                setActive(false);\r\n            });\r\n        } else {\r\n            console.log('please enter your name')\r\n        }\r\n    };\r\n\r\n    const createRoomComponent =\r\n        <Box display='flex' flexDirection='column' alignItems='center' width={'100%'} borderRadius='5px' bgcolor='white'>\r\n            <Typography variant='h4' className={classes.titleStyle}>Create a new room</Typography>\r\n            <TextField\r\n                required\r\n                id=\"outlined-required\"\r\n                label=\"Room name\"\r\n                variant=\"outlined\"\r\n                value={name}\r\n                onChange={handleChangeTexfield}\r\n                className={classes.textfield}\r\n                onKeyPress={handleKeyPress}\r\n                autoFocus\r\n            />\r\n            <div className={classes.alignButton}>\r\n                <Button\r\n                    size=\"large\"\r\n                    color=\"secondary\"\r\n                    variant=\"contained\"\r\n                    className={classes.myButton}\r\n                    onClick={createRoom}\r\n                >\r\n                    create\r\n                </Button>\r\n            </div>\r\n        </Box>;\r\n\r\n\r\n    const shareRoomComponent =\r\n            <Box\r\n                display='flex'\r\n                flexDirection='column'\r\n                alignItems='center'\r\n                width={'100%'}\r\n                borderRadius='5px'\r\n                bgcolor='white'\r\n                onKeyPress={handleKeyPress}\r\n            >\r\n                <Typography variant='h4' className={classes.titleStyle}>Room was created</Typography>\r\n                <div className={classes.copyLink}>\r\n                    <TextField variant=\"outlined\" value={link} onChange={handleChangeTexfield} className={classes.textfieldLink} minWidth={300} autoFocus/>\r\n                    <Button size=\"large\" color=\"secondary\" variant=\"contained\" className={classes.myButton} onClick={() => {navigator.clipboard.writeText(link)}}>\r\n                        copy\r\n                    </Button>\r\n                </div>\r\n                <Typography variant='h6' align='center' className={classes.subtitle}>\r\n                    Share the link to invite someones to your room\r\n                </Typography>\r\n\r\n                <Link to={`/room-lobby/${roomId}`} style={{ textDecoration: 'none', width: '80%'}}>\r\n                <Button\r\n                    size=\"large\"\r\n                    color=\"secondary\"\r\n                    variant=\"contained\"\r\n                    className={classes.nextButton}\r\n                    to={`/room-lobby/${roomId}`}\r\n                >\r\n                    next\r\n                </Button>\r\n                </Link>\r\n           </Box>;\r\n\r\n    return (\r\n        <ThemeProvider theme={theme}>\r\n            {/* Header */}\r\n            <Box\r\n                display='flex'\r\n                height={63}\r\n                bgcolor='#2E7D32'\r\n                alignItems='center'\r\n                paddingLeft='36px'\r\n            >\r\n               <Link to=\"/\" style={{ textDecoration: 'none', color: 'white'}}>\r\n                    <ArrowBackIosIcon/>\r\n               </Link>\r\n            </Box>\r\n\r\n            {/* Body */}\r\n            <Grid container className={classes.containerStyle}>\r\n                <Grid item xs={11} md={6} lg={5}>\r\n                   {active ? createRoomComponent : shareRoomComponent}\r\n                </Grid>\r\n            </Grid>\r\n        </ThemeProvider>\r\n    )\r\n};\r\n\r\nexport default RoomCreateForm;\r\n","import React from 'react';\r\nimport { HashRouter as Router, Route, Switch } from \"react-router-dom\";\r\nimport RoomLobby from \"../RoomLobby/RoomLobby\";\r\nimport Room from \"../Room/Room\";\r\nimport Home from \"../Home/Home\";\r\nimport RoomCreateForm from \"../RoomCreateForm/RoomCreateForm\";\r\nimport CssBaseline from \"@material-ui/core/CssBaseline\";\r\n\r\nconst App = () => {\r\n    return (\r\n        <CssBaseline>\r\n            <Router>\r\n                <Switch>\r\n                    <Route exact path='/' component={Home} />\r\n                    <Route exact path='/create-room' component={RoomCreateForm} />\r\n                    <Route exact path='/room-lobby/:roomId' component={RoomLobby} />\r\n                    <Route path='/rooms/:roomId' component={Room} />\r\n                </Switch>\r\n            </Router>\r\n        </CssBaseline>\r\n    );\r\n};\r\n\r\nexport default App;\r\n","import React from 'react';\r\nimport './index.scss';\r\nimport ReactDOM from 'react-dom';\r\nimport { Provider } from 'react-redux';\r\nimport store from './store';\r\nimport App from './components/App/App';\r\n// eslint-disable-next-line\r\nimport adapter from 'webrtc-adapter'; // insulates app from browser webrtc implementation differences\r\n\r\nReactDOM.render(\r\n  <>\r\n      <Provider store={store}>\r\n          <App />\r\n      </Provider>\r\n  </>,\r\n  document.getElementById('root')\r\n);\r\n"],"sourceRoot":""}